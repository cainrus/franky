(function(t,e){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e(t)}else{e(t)}})(typeof global!=="undefined"?global:this,function(t){var e=function(t){};e.version="1.0.1";e.isDebug=false;e.isArray=function(t){return t instanceof Array};e.isArrayLike=function(t){return e.isObject(t)&&!e.isArray(t)&&"length"in t};e.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return typeof t==="object"&&t.nodeType===1&&typeof t.style==="object"&&typeof t.ownerDocument==="object"}};e.isFunction=function(){return Array.prototype.every.call(arguments,function(t){return t instanceof Function})};e.isObject=function(t){return typeof t==="object"};e.isString=function(t){return typeof t==="string"};e.stringf=function(t,e){var n=Array.prototype.slice.call(arguments,1);return t.replace(/%s/g,function(){return n.shift()||""})};if(typeof JSON==="undefined"){throw new Error("JSON is not supported")}e.JSON=JSON;e.console={slog:function(t){this.log(e.stringf.apply(this,arguments))},log:function(e){if(typeof debug!=="undefined"){debug(e)}else if(t.console&&t.console.log){t.console.log(e)}},error:function(t){throw new Error(t)},dir:function(t){this.log(e.JSON.stringify(t))}};e.log=e.console.log;e.error=e.console.error;var n=/^https?:\/\/\S+/i;e.isURL=function(t){if(typeof t!=="string"){e.error("isURL expects string parameter instead "+typeof t)}return n.test(t)};var r=Array.prototype.filter?function(t,e){return t.filter(e)}:function(t,e){var n=[];x.each(t,function(t,r){if(e(t,r,this)){n.push(t)}});return n};e.filter=function(t,n){if(!e.isArray(t)){e.error("first argument is expected to be an array instead of "+typeof t)}if(!e.isFunction(n)){e.error("second argument is expected to be a function instead of "+typeof n)}return r(t,n)};e.forEach=function(t,e,n){var r,i;n=n||t;for(r=0,i=t.length;r<i;r++){e.call(n,t[r],r,t)}return this};e.indexOf=function(t,e,n){n=n||0;if(!(t instanceof Array)){throw new Error("Function expects array as first argument")}if("indexOf"in Array.prototype){return t.indexOf(e,n)}else{for(var r=0,i=t.length;r<i;r++){if(t[r]===e&&r>=n){return r}}}return-1};e.map=function(t,n){var r=[];if(e.isArray(t)&&n instanceof Function){r=t.map(n)}return r};(function(){var t=Array.prototype.some?function(t,e){return t.some(e)}:function(t,e){for(var n=0,r=t.length;n<r;n++){if(e(t[n],n,t)){return true}}return false};e.some=function(n,r){if(!e.isArray(n)){e.error("first argument is expected to be an array instead of "+typeof n)}if(!e.isFunction(r)){e.error("second argument is expected to be a function instead of "+typeof r)}return t(n,r)}})();var i={};e.each=i.each=function(t,n,r){if(e.isArray(t)){throw new Error("Each for array is deprecated - use x.forEach")}var i;r=r||t;for(i in t){if(t.hasOwnProperty(i)){n.call(r,t[i],i,t)}}return this};e.beget=function(t,n){var r={},i,o=typeof t,u=typeof n;if(o!=="object"){e.error("Only object allowed to be prototype and tried to work with "+o)}if(u!=="undefined"&&u!=="object"){e.error("Only object allowed to be list of properties instead "+u)}if(typeof Object.create==="function"){i={};e.each(n,function(t,e){i[e]={writable:true,enumerable:true,value:t}});r=Object.create(t,i)}else{var s=function(){};if(t&&typeof t==="object"){s.prototype=t}i=new s;if(typeof n!=="undefined"){e.each(n,function(t,e){i[e]=t})}r=i}return r};e.getRandom=function(t){return parseInt(Math.random()*(t||1e3))};e.getElementId=function(t){if(!e.isElement(t)){e.error("nodeElement expected as first argument instead of "+typeof t)}var n=t.getAttribute("id");if(!n){n="_"+e.getRandom(1e16);t.setAttribute("id",n)}return n};var o=function(t){e.log("fallback");var n=document.all,r=[];for(var i=0,o=n.length;i<o;++i){if(typeof n[i].getAttribute(t)==="string"){r.push(n[i])}}return r};e.getElementsByAttr=function(e){var n=[],r=arguments[1]||t.document||null;if("getAttribute"in r&&r.getAttribute(e)){n.push(r)}if(r&&r.querySelectorAll){try{n=n.concat(Array.prototype.slice.call(r.querySelectorAll("["+e+"]")))}catch(i){}}if(!n.length){n=n.concat(o(e))}return n};var u=(new RegExp).compile(/^\s+|\s+$/g);e.trim=function(t){var n=typeof t;if(n!=="string"){e.error("Argument must be string but"+n+" passed")}return t.trim instanceof Function?t.trim():t.replace(u,"")};e.stripSpaces=function(t){return t.split(" ").join("")};e.getJPathValue=function(t,e){var n=t,r=e.split("."),i=0;while(n[r[i]]){n=n[r[i++]]}return n};e.getObject=function(t){t.beget=function(t){return e.beget(this,t)};return e.beget(t)};e.constructURL=function(t,e){var n="",r=[],i,o=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),u=o&&o[3]?o[3]:"";if(o&&o[2]){var s=o[2].split("&"),a=s.length;while(a--){r.push(s[a])}}for(i in e){if(e.hasOwnProperty(i)){r.push(i+"="+e[i])}}if(o){n=o[1]+"?"+r.join("&")+u}else{n=t+"?"+r.join("&")+u}return n};e.data=function(t,n){if(!e.isElement(t)){e.error("nodeElement expected as first argument instead of "+typeof t)}return t.getAttribute("data-"+n)};e.ComponentBase={data:function(t){var n=this.element;return n?e.data(n,t):undefined},setId:function(t){this.id=t;return this},baseInit:function(t,n){var r=this;this.element=n;e.each(e.dataset(n),function(t,e){r[e]=t})}};e.Component=function(){var t=[],n=[],r={},i="data-xapp";return{extend:function(i){var o=t.length,u;if(e.isObject(i)){u=e.beget(e.ComponentBase,i)}else if(e.isString(i)&&e.isFunction(arguments[1])){u=e.beget(e.ComponentBase,{id:i,init:arguments[1]})}else if(e.isString(i)&&e.isArray(arguments[1])){var s=arguments[1];u=e.beget(e.ComponentBase,{id:i,init:function(){var t=e.filter(s,function(t){return e.isString(t)});t=e.map(t,function(t){if(!n[t]){throw new Error("Service "+t+" hasnt defined")}return n[t]()});var r=e.filter(s,function(t){return e.isFunction(t)});if(r.length>1){throw new Error("Too much declaration functions")}r[0].apply(this,t)}})}else{throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })')}if(!u.id){e.error("extend method expects id field in description object")}t.push(u);r[u.id]=o;return t[o]},factory:function(t,e){n[t]=e},initByHTML:function(t){var n=t||document,r=this,o=e.getElementsByAttr(i,n);e.forEach(o,function(t){var n=e.data(t,"xapp");e.forEach(n.split(" "),function(n){r.initById(n,e.getElementId(t),t)})});return this},initById:function(e,n,i){var o=e in r?t[r[e]]:null;if(o){if(typeof n!=="undefined"){o.setId(n)}o.baseInit(n,i);o.init(n)}}}}();e.dataset=function(t){var n={};if(e.isElement(t)){if(t.dataset){n=t.dataset}else{e.forEach(t.attributes,function(t){if(t.name.indexOf("data-")===0){n[t.name.substr(5)]=t.value}})}}return n};extend.extend=function(t,e){var n=function(){};t.superclass=n.prototype=e.prototype;t.prototype=new n;t.prototype.constructor=t;if(e.prototype.constructor===Object.prototype.constructor){e.prototype.constructor=e}};e.View=function(t){this.templates=t&&t.templates?e.beget(t.templates):{}};e.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(t){this.re.parse=t},getCustomRender:function(){var t=arguments[0]!=="undefined"?arguments[0].split(this.re.rule):null;if(t&&t.length===2){return this.parseRules[t[0]]&&this.parseRules[t[0]].call(this,t[1])}},parseRules:{l10n:function(t){return function(n){if(e.isDebug&&!n.l10n(t)){e.console.error("There is no translation for "+t)}return n.l10n?n.l10n(t):t}},jpath:function(t){return function(n){return e.getJPathValue(n,t)||""}},view:function(t){var e=this;return function(n){return e.get(t,n)}}},ruleFunction:function(t,n,r){return this.getCustomRender(t)||function(i){var o=i&&i[t]||i&&i.views&&i.views.get(t,i)||"";if(!o){o=r[t]?self.getContent(r[t],i):n?n[t]:""}if(e.isDebug&&!o){e.console.log("Undefined variable "+t)}return o||""}},getContent:function(t,n){return e.isArray(t)?e.map(t,function(t){return typeof t==="string"?t:t(n)}).join(""):t.toString()},get:function(t,e){var n=this;var r=e&&e.views?e.views.templates[t]:this.templates[t];return n.getContent(r,e)}};e.View.prototype.let=function(t,e,n){var r=this.templates[t]=[],i=this,o=0;e.replace(this.re.parse,function(t,u,s){r.push(e.substr(o,s-o),i.ruleFunction(u,n,i.templates));o=s+t.length});if(o<e.length){r.push(e.substr(o))}return this};e.views=new e.View;if(typeof define==="function"&&define.amd){define("franky",[],function(){return e})}t.x=t.franky=e;return e});
//# sourceMappingURL=franky-min.map